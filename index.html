<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<title>Subnet Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; }

body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f5f7fa;
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.container {
    background: #ffffff;
    width: 100%;
    max-width: 1100px;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

label {
    font-size: 14px;
    display: block;
}

input {
    width: 100%;
    padding: 10px;
    margin: 8px 0 15px;
    font-size: 15px;
}

button {
    padding: 10px 16px;
    font-size: 14px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background: #43a047;
}

.calc-btn {
    width: 100%;
    margin-bottom: 10px;
}

.themes {
    text-align: center;
    margin-bottom: 15px;
}

.themes button {
    margin: 0 5px;
}

.output {
    display: flex;
    gap: 20px;
    margin-top: 15px;
}

.result-box,
.solution-box {
    flex: 1;
    border: 1px solid #aaa;
    padding: 15px;
    font-family: Consolas, monospace;
    white-space: pre-line;
}

.result-box {
    color: #0033cc;
}

.solution-box {
    background: #f9fafc;
    color: #b30000;
}

/* THEMES */
.dark {
    background: #1e1e1e;
}
.dark .container {
    background: #2c2c2c;
    color: white;
}
.dark input {
    background: #3a3a3a;
    color: white;
}
.dark .result-box {
    color: #9cdcfe;
}
.dark .solution-box {
    background: #333;
    color: #ff8c8c;
}

.blue {
    background: #e3f2fd;
}
</style>

</head>

<body>

<div class="container">
    <h1>Subnet Calculator</h1>

```
<label for="ipInput">Enter IP Address (with or without CIDR)</label>
<input id="ipInput" placeholder="e.g. 192.168.10.2/19">

<button class="calc-btn" onclick="calculateSubnet()">Calculate</button>

<div class="themes">
    Theme:
    <button onclick="setTheme('light')">Light</button>
    <button onclick="setTheme('dark')">Dark</button>
    <button onclick="setTheme('blue')">Blue</button>
</div>

<div class="output">
    <div class="result-box" id="resultBox">Result</div>
    <div class="solution-box" id="solutionBox">Solution</div>
</div>
```

</div>

<script>
/* ---------- Helper Functions ---------- */

function isValidIPv4(ip) {
    const parts = ip.split('.');
    if (parts.length !== 4) return false;
    for (let p of parts) {
        if (!/^\d+$/.test(p)) return false;
        const n = Number(p);
        if (n < 0 || n > 255) return false;
    }
    return true;
}

function ipToBinary(ip) {
    return ip.split('.')
        .map(o => Number(o).toString(2).padStart(8,'0'))
        .join('.');
}

function splitBinary(ipBin, cidr) {
    const bits = ipBin.replaceAll('.', '');
    return bits.slice(0, cidr) + " | " + bits.slice(cidr);
}

function ipToInt(ip) {
    return ip.split('.').reduce((a,o)=> (a<<8)+Number(o),0)>>>0;
}

function intToIp(i) {
    return [(i>>>24)&255,(i>>>16)&255,(i>>>8)&255,i&255].join('.');
}

/* ---------- Main Logic ---------- */

function calculateSubnet() {
    let input = document.getElementById("ipInput").value.trim();
    const resultBox = document.getElementById("resultBox");
    const solutionBox = document.getElementById("solutionBox");

    resultBox.textContent = "";
    solutionBox.textContent = "";

    if (!input) {
        alert("Enter IP address");
        return;
    }

    let ipPart = input;
    let cidr = null;

    if (input.includes("/")) {
        [ipPart, cidr] = input.split("/");
        cidr = Number(cidr);
        if (isNaN(cidr) || cidr < 0 || cidr > 32) {
            alert("Invalid CIDR value (must be 0–32)");
            return;
        }
    }

    if (!isValidIPv4(ipPart)) {
        alert("Invalid IP address. Each octet must be between 0 and 255.");
        return;
    }

    if (cidr === null) {
        const first = Number(ipPart.split(".")[0]);
        if (first <= 126) cidr = 8;
        else if (first <= 191) cidr = 16;
        else if (first <= 223) cidr = 24;
        else {
            alert("Invalid IP class");
            return;
        }
        input = ipPart + "/" + cidr;
    }

    const ipInt = ipToInt(ipPart);
    const mask = (~0 << (32 - cidr)) >>> 0;

    const network = ipInt & mask;
    const broadcast = network | (~mask >>> 0);

    const firstHost = network + 1;
    const lastHost = broadcast - 1;

    resultBox.textContent =
`IP Used            : ${input}
Network Address    : ${intToIp(network)}
Broadcast Address  : ${intToIp(broadcast)}
Host Range         : ${intToIp(firstHost)} to ${intToIp(lastHost)}`;

    solutionBox.textContent =
`Given IP Address:
${input}

IP in Binary:
${ipToBinary(ipPart)}

Network | Host bits:
${splitBinary(ipToBinary(ipPart), cidr)}

CIDR /${cidr} means:
→ ${cidr} bits for Network
→ ${32 - cidr} bits for Host

Subnet Mask:
${intToIp(mask)}
${ipToBinary(intToIp(mask))}

Network Address:
${intToIp(network)}
${ipToBinary(intToIp(network))}

Broadcast Address:
${intToIp(broadcast)}
${ipToBinary(intToIp(broadcast))}

Host Range (Decimal):
${intToIp(firstHost)} to ${intToIp(lastHost)}

Host Range (Binary):
${ipToBinary(intToIp(firstHost))}
to
${ipToBinary(intToIp(lastHost))}`;
}

function setTheme(t){
    document.body.className="";
    if(t!=="light") document.body.classList.add(t);
}
</script>

</body>
</html>
